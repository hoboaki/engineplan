# プラグインやそれに関わるシステム関連のメモ

## プラグインでできること

- Vcs の追加
- ネイティブコード の追加
- スクリプトコード の追加
- アセットタイプ の追加
- 既存アセットタイプに独自パラメータの追加
- エディタツールバーのメニュー追加
- エディタサブウィンドウの追加

- 公式限定
    - BuildSystem の追加（BuildKitに内包）
    - CoreLib の追加（BuildKitに内包）

## タスク

ビルド
- Vcs更新
- Clean
- Build
    - Asset
    - ScriptCode
    - NativeCode

- Vp Vcs処理
- Ab アセットビルド（Vcs処理待ち）
    - FbxセットA
        - バイナライズ
            - Tex->ResTex Mat->ResMat Fbx->ResMdl
        - パック
    - ScriptCode
- Eb 実行ファイルビルド（アセットビルド待ち）

- タスクコマンド状態
    - Wait
    - Prepared
    - Executed
    - Finished
    - Canceled

- タスク
    - A
        - A-1 A-2 A-3
    - B

## ビルドシステムのビルダーアドオン要件

- ビルドターゲットのシステム情報を返す
    - [32bit, 64bit] [LE, BE]
- リビルドする必要性があるかの情報を返す
- 実行ファイルをビルドする
    - エディットモード アプリケーションモード
    - ビルド時に渡される情報
        - ビルドターゲット情報
        - ランタイムアセットのファイルリスト（アセットのビルドはアセットシステムが行う）
        - ネイティブコードのリスト
        - システムインクルードパスのリスト
        - 作業に使うフォルダのパス
            - $(ProjectRoot)/.Build/$(Plugin) => これ以下をどう使うかはプラグインの自由
            - DevKitWinだとこういうフォルダを下に作る
                - /$(Platform)_$(BuildTarget)_$(BuildVersion)/Edt (エディットモード)
                - /$(Platform)_$(BuildTarget)_$(BuildVersion)/App (アプリケーションモード)
                    - /Exec => 実行ファイルフォルダ（成果物置き場・起動時にCodeとData以下からコピーされる）
                    - /Code => コードビルド領域
                    - /Data => データコピー領域（エディットモードの.Cacheから直接リードするため空）
                - 例: MyProject/.Build/Adel.DevKitWin/Win-Dx11_PC-Product_Ld
- ビルドした実行ファイルを起動する
- 実行中の実行ファイルを停止する
- ビルドした実行ファイルを発行（Publish）する
    - 指定ディレクトリにアプリケーションモードの実行ファイルパッケージを配置する

- ビルドフォルダについて
    - $(ProjectRoot)/.Build
    - 実行ファイルやアセットのビルドのワーク領域として使うフォルダ。

- 考えられていない点
    - アセットのビルドフォルダと並べてみて違和感がないか -> 検討済み
    - アセットのビルドの"ビルド"の言葉かぶりが気になる。
        - 各所でビルドという言葉を使うため、短いにこしたことはないし、
        - ビルド = 全体を創り上げるというイメージも合っているし。
        - アセットビルドという言葉も合っている。違和感ない。
        - ビルドする → アセットと実行ファイルをビルドする 、という構成とするとしっくり。
        - となると、実行ファイルをビルドする機構をちゃんと名前付けしてあげれば違和感はとけそう。
        - AssetBuild と ExecFileBuild 
        - ビルダーアドオンは開発キットによって AssetBuild されたランタイムアセットを使って実行ファイルをビルドするアドオン、と呼べそう。
